# FontTools Subset Generator

日本語フォントをサブセット化してWebフォント（WOFF2）を生成するツール。

## 特徴

- 🎯 **対話形式で簡単に使える** - 質問に答えるだけで必要な文字を選択
- 📦 **バリアブルフォント対応** - Variable Fontの軸情報を保持したまま変換
- ⚡ **2つの処理モード** - サブセット化 or WOFF2変換のみ
- 🔄 **バッチ処理対応** - 複数フォントを一括処理
- 📊 **自動レポート生成** - 処理結果をMarkdownで出力

## インストール

### 必要環境

| 項目 | 要件 |
|------|------|
| Python | 3.6以上 |
| OS | Windows |

### セットアップ

Python がインストールされていることを確認：

```bash
python --version
```

依存ライブラリは `main.bat` 実行時に自動インストールされます。

## 使い方

### クイックスタート

1. `src/` フォルダに変換したいフォントファイルを配置
2. `main.bat` をダブルクリック
3. 対話形式の質問に回答（y/n）
4. `dist/` フォルダに WOFF2 ファイルが生成される

### 処理モード

| モード | 説明 | 用途 |
|--------|------|------|
| WOFF2変換のみ | サブセット化せずに全文字を保持 | フォーマット変換だけしたい |
| サブセット化 | 必要な文字のみを選択して軽量化 | Webサイト用に最適化 |

### サポートフォーマット

入力: TTF, OTF, WOFF, WOFF2  
出力: WOFF2

## 文字セット

### 基本文字

| 文字セット | 内容 | 自動選択 |
|-----------|------|----------|
| オプション | 基本制御文字 | ✓ |
| 半角英数字 | A-Z, a-z, 0-9 | - |
| 全角英数字 | Ａ-Ｚ、ａ-ｚ、０-９ | - |
| 半角記号 | ASCII記号 | - |
| 全角記号 | 全角記号文字 | - |

### 仮名文字

| 文字セット | 内容 |
|-----------|------|
| ひらがな | ひらがな全文字 |
| カタカナ | 全角カタカナ |
| 半角カタカナ | 半角カタカナ |

### 漢字

| 水準 | 文字数 | 説明 |
|------|--------|------|
| JIS第一水準 | 2,965字 | 常用漢字を含む基本的な漢字 |
| JIS第二水準 | 3,390字 | やや専門的な漢字 |
| JIS第三水準 | 1,259字 | 人名・地名などの特殊な漢字 |
| JIS第四水準 | 2,436字 | 更に特殊な漢字 |

補完用の常用漢字・人名漢字も自動的に含まれます。

## ファイル構成

```
FontTools/
├── main.bat          # 実行ファイル
├── main.py           # メインスクリプト
├── libs/             # 文字セット定義
├── src/              # 入力フォント配置場所
└── dist/             # 出力先（自動生成）
    ├── *.woff2       # 変換されたフォント
    └── report.md     # 処理結果レポート
```

## カスタマイズ

### 独自の文字セットを追加

1. `libs/` に `.txt` ファイルを作成
2. 1行目に説明、2行目以降に文字を記述
3. `main.py` の選択フローに組み込む（オプション）

### 基本文字の変更

`libs/オプション.txt` を編集すると、全サブセットに含まれる基本文字を変更できます。

## トラブルシューティング

### Python が認識されない

環境変数 PATH に Python のパスを追加してください。

### インストールエラー

```bash
pip install --upgrade pip
pip install fonttools[woff]
```

### 文字化け

`main.bat` は自動的に UTF-8 に設定しますが、問題がある場合は文字セットファイルが UTF-8 で保存されているか確認してください。

### 一時ファイルが残る

処理中断時に `temp-chars.txt` や `temp-all-chars.txt` が残ることがあります。手動で削除しても問題ありません。

## 使用例

### Web用軽量フォント作成

```
フォント: NotoSansJP-VariableFont_wght.ttf
選択: 半角英数字 + ひらがな + カタカナ + JIS第一水準
結果: 約70%軽量化
```

### フォーマット変換のみ

```
処理モード: WOFF2変換のみ
結果: 全文字を保持して WOFF2 に変換
```

## ライセンス

生成されたフォントファイルは元のフォントのライセンスに従ってください。

## 依存ライブラリ

- [fonttools](https://github.com/fonttools/fonttools) - フォント処理ライブラリ（自動インストール）
